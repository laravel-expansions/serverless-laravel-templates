#!/usr/bin/bash

echo pwd

read -p "App Name [sam-app]: " name
APP_NAME=${name:-sam-app}


PS3='Please Select Template Number: '
select TEMPLETE_TYPE in "SAM Default Template" "SAM Default Template + Kinesis Trigger"
do
  if [ -n "$TEMPLETE_TYPE" ]; then
    break
  else
    echo 'invvalid value, input again.'
    echo
  fi
done
echo "> $TEMPLETE_TYPE"

echo

echo "| Template Result:"
echo "|"
echo "|  App Name: $APP_NAME"
echo "|  Template Type: $TEMPLETE_TYPE"
echo

read -p "Create this appï¼Ÿ (y/n) :" yn
YN=${yn:-y}

if [ "${YN}" = "y" ]; then
  echo
else
  echo
  echo "Aborted!"
  exit 0
fi

# mkdir $APP_NAME

# cd $APP_NAME
# composer create-project laravel/laravel:^8.0 laravel
# cd laravel
# composer require bref/bref bref/laravel-bridge --update-with-dependencies
# if [ "$TEMPLETE_TYPE" == "SAM Default Template + Kinesis Trigger" ]; then
#   composer require laravel-expansions/serverless-function
#   php artisan vendor:publish --tag=expantion-function
# fi
# cd ../../


# cp ./src/Makefile $APP_NAME/laravel/Makefile
# if [ "$TEMPLETE_TYPE" == "SAM Default Template" ]; then
#   cp ./src/templates/sam.default.template.yaml ./$APP_NAME/template.yaml
# fi
# if [ "$TEMPLETE_TYPE" == "SAM Default Template + Kinesis Trigger" ]; then
#   cp -r ./src/worker ./$APP_NAME/worker
#   cp ./src/templates/sam.kinesis.template.yaml ./$APP_NAME/template.yaml
# fi

exit 0